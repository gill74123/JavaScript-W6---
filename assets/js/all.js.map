{"version":3,"sources":["all.js"],"names":["addTicketForm","document","querySelector","addTicketBtn","ticketName","ticketImgUrl","ticketRegion","ticketPrice","ticketNum","ticketRate","ticketDescription","inputGroup","regionSearch","searchResult","cantFindArea","ticketCardArea","data","axios","get","then","response","init","areaRatio","error","console","log","str","forEach","item","imgUrl","area","rate","name","description","group","price","innerHTML","addEventListener","addData","checkInput","num","input","id","messageArea","value","parseInt","length","validUrl","match","obj","push","reset","updateList","showData","filter","searchResultNum","dataLength","textContent","classList","remove","add","areaNum","areaName","Object","keys","newArea","ary","chart","c3","generate","bindto","padding","bottom","columns","type","colors","donut","title","label","show","width","size","height"],"mappings":"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","file":"all.js","sourcesContent":["// 表單內元件宣告\nconst addTicketForm = document.querySelector(\".addTicket-form\")\nconst addTicketBtn = document.querySelector(\"#addTicketBtn\");\nconst ticketName = document.querySelector(\"#ticketName\");\nconst ticketImgUrl = document.querySelector(\"#ticketImgUrl\");\nconst ticketRegion = document.querySelector(\"#ticketRegion\");\nconst ticketPrice = document.querySelector(\"#ticketPrice\");\nconst ticketNum = document.querySelector(\"#ticketNum\");\nconst ticketRate = document.querySelector(\"#ticketRate\");\nconst ticketDescription = document.querySelector(\"#ticketDescription\");\nconst inputGroup = [ticketName, ticketImgUrl, ticketRegion, ticketPrice, ticketNum, ticketRate, ticketDescription];\n\n// 搜尋區域\nconst regionSearch = document.querySelector(\"#regionSearch\");\nconst searchResult = document.querySelector(\"#searchResult\");\nconst cantFindArea = document.querySelector(\".cantFind-area\");\n\n// 顯示列表內元件宣告\nconst ticketCardArea = document.querySelector(\"#ticketCardArea\");\n\n// console.log(inputGroup);\n\nlet data;\naxios.get('https://raw.githubusercontent.com/hexschool/js-training/main/travelApi.json')\n  .then(function (response) {\n    data = response.data.data;\n\n    // 渲染初始頁面\n    init(data);\n\n    // 渲染初始資料圓餅圖\n    areaRatio(data);\n  })\n  .catch(function (error) { // 呼叫 API 錯誤時可以印出錯誤\n    console.log(error);\n  })\n\n// 渲染頁面\nfunction init(data) {\n  let str = \"\";\n  data.forEach(item => {\n    // console.log(item);\n    str += `\n  <div class=\"col-md-6 col-lg-4\">\n    <li class=\"shadow-sm border rounded-2 h-100\">\n      <div class=\"ticketCard-img | position-relative\">\n        <a href=\"#\" class=\"d-block overflow-hidden\">\n          <img src=\"${item.imgUrl}\" class=\"img-cover w-100\" alt=\"\">\n        </a>\n        <div class=\"position-absolute start-0 top-m13 rounded-end d-inline-block text-white bg-secondary fs-4 py-3 px-6\">${item.area}</div>\n        <div class=\"position-absolute start-0 bottom-m16 rounded-end d-inline-block text-white bg-primary py-1 px-3\">${item.rate}</div>\n      </div>\n      <div class=\"ticketCard-content | d-flex flex-column justify-content-between p-6\">\n        <a href=\"#\">\n          <h2 class=\"ticketCard-name | border-bottom border-success border-2 fw-medium fs-5 pb-1 mb-5\">${item.name}</h2>\n        </a>\n        <p class=\"text-dark\">${item.description}</p>\n        <div class=\"d-flex justify-content-between align-items-center\">\n          <div class=\"d-flex align-items-center\">\n            <span class=\"material-icons-outlined text-primary me-1\">error</span>\n            <p class=\"fw-medium text-primary\">剩下最後 ${item.group} 組</p>\n          </div>\n          <div class=\"d-flex align-items-center\">\n            <span class=\"fw-medium text-primary me-1\">TWD</span>\n            <p class=\"fw-medium fs-6 text-primary\">$${item.price}</p>\n        </div>\n      </div>\n      </div>\n    </li>\n  </div>`;\n  });\n  ticketCardArea.innerHTML = str;\n}\n\n// 註冊 click 監聽事件\naddTicketBtn.addEventListener(\"click\",addData);\n\n// 驗證表單欄位\nfunction checkInput() {\n  let num = 0;\n  inputGroup.forEach(function(item){\n    const input = document.querySelector(`#${item.id}`);\n    const messageArea = document.querySelector(`#${item.id}-message`);\n    // console.log(input.id);\n\n    if (input.value === \"\") {\n      messageArea.innerHTML = `<span class=\"material-icons-outlined text-danger me-2\">error</span>\n      <span class=\"text-danger\">必填！</span>`;\n    } else{\n      // 判斷星級是否在1~10分 & 判斷描述字數是否在100字內 & 判斷圖片網址是否為正確格式\n      if (input.id === \"ticketRate\" && (parseInt(input.value) > 10 || parseInt(input.value) < 1)) {\n        messageArea.innerHTML = `<span class=\"material-icons-outlined text-danger me-2\">error</span>\n      <span class=\"text-danger\">星級區間是 1-10 分！</span>`;\n      } else if (input.id === \"ticketDescription\" && input.value.length > 100) {\n        messageArea.innerHTML = `<span class=\"material-icons-outlined text-danger me-2\">error</span>\n      <span class=\"text-danger\">字數不得超過 100 個字！</span>`;\n      } else if (input.id === \"ticketImgUrl\" && validUrl(input)){\n        messageArea.innerHTML = `<span class=\"material-icons-outlined text-danger me-2\">error</span>\n      <span class=\"text-danger\">請填入正確圖片網址格式！</span>`;\n      } else{\n        messageArea.innerHTML = ``;\n        num += 1;\n      }\n    }\n  })\n  // 回傳 num 結果給 addData() 判斷是否新增資料\n  return num;\n}\n\n// 驗證圖片網址是否為正確格式\nfunction validUrl(input) {\n  let value = input.value;\n  if (!value.match(/jpg|jpeg|png|gif/i)) {\n    return true\n  }\n}\n\n// 新增套票\nfunction addData() {\n  let num = checkInput();\n  if (num === 7) {\n    let obj = {\n      id: data.length,\n      name: ticketName.value,\n      imgUrl: ticketImgUrl.value,\n      area: ticketRegion.value,\n      description: ticketDescription.value,\n      group: ticketNum.value,\n      price: ticketPrice.value,\n      rate: ticketRate.value\n    };\n  \n    data.push(obj);\n  \n    // 清空表單欄位\n    addTicketForm.reset();\n  \n    // 渲染頁面\n    updateList();\n  }\n}\n\n// 註冊 change 監聽事件\nregionSearch.addEventListener(\"change\", updateList)\n\n// 搜尋區域\nfunction updateList() {\n  let showData = data.filter(item => {\n    if (regionSearch.value === item.area) {\n      return item;\n    } else if (regionSearch.value === \"All\" || regionSearch.value === \"\"){\n      return item;\n    }\n  })\n\n  // 渲染頁面，用篩選好的 showData\n  init(showData);\n\n  // 搜尋筆數 & 搜尋不到頁面渲染，用篩選好的 showData\n  searchResultNum(showData);\n\n  // 渲染新的資料到圓餅圖\n  areaRatio(showData);\n}\n\n// 搜尋筆數 & 搜尋不頁面顯示\nfunction searchResultNum(data) {\n  // 搜尋比數顯示\n  let dataLength = data.length;\n  searchResult.textContent = `本次搜尋共 ${dataLength} 筆資料`;\n\n  // 搜尋不到顯示畫面\n  if (dataLength === 0) {\n    cantFindArea.classList.remove(\"d-none\");\n  } else{\n    cantFindArea.classList.add(\"d-none\");\n  }\n}\n\n// C3 圖表\nfunction areaRatio(data) {\n  // output[['高雄', 1],['台北', 2],['台中', 3]]\n  // 將資料內所要用的 area 資料取出\n  let areaNum = {};\n  data.forEach(function(item){\n    if(areaNum[item.area]){\n      areaNum[item.area] += 1;\n    } else{\n      areaNum[item.area] = 1;\n    }\n  })\n  // console.log(areaNum);\n\n  // 將 areaNum 物件的 key 值取出並回傳陣列\n  let areaName = Object.keys(areaNum);\n  // console.log(areaName);\n\n  // 將 areaNum 物件的 value 取出並拼湊成 output 的樣子\n  let newArea = [];\n  areaName.forEach(function(item){\n    let ary = [];\n    ary.push(item);\n    ary.push(areaNum[item]);\n    newArea.push(ary);\n  })\n  // console.log(newArea);\n\n  let chart = c3.generate({\n    bindto: \"#chart\",\n    padding: {\n      bottom: 10\n    },\n    data: {\n      columns: newArea,\n      type: 'donut',\n      colors: {\n        '高雄': '#E68618',\n        '台中': '#5151D3',\n        '台北': '#26BFC7'\n      }\n    },\n    donut: {\n      title: \"套票地區比重\",\n      label: {\n        show: false\n      },\n      width: 15\n    },\n    size: {\n      height: 180\n    }\n  });\n}\n\n"]}