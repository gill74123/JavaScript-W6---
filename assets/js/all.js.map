{"version":3,"sources":["all.js"],"names":["addTicketForm","document","querySelector","addTicketBtn","ticketName","ticketImgUrl","ticketRegion","ticketPrice","ticketNum","ticketRate","ticketDescription","inputGroup","regionSearch","searchResult","cantFindArea","ticketCardArea","data","axios","get","then","response","init","str","forEach","item","imgUrl","area","rate","name","description","group","price","innerHTML","addEventListener","addData","checkInput","num","input","id","messageArea","value","parseInt","length","obj","push","reset","updateList","showData","filter","searchResultNum","dataLength","textContent","classList","remove","add"],"mappings":"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","file":"all.js","sourcesContent":["// 表單內元件宣告\nconst addTicketForm = document.querySelector(\".addTicket-form\")\nconst addTicketBtn = document.querySelector(\"#addTicketBtn\");\nconst ticketName = document.querySelector(\"#ticketName\");\nconst ticketImgUrl = document.querySelector(\"#ticketImgUrl\");\nconst ticketRegion = document.querySelector(\"#ticketRegion\");\nconst ticketPrice = document.querySelector(\"#ticketPrice\");\nconst ticketNum = document.querySelector(\"#ticketNum\");\nconst ticketRate = document.querySelector(\"#ticketRate\");\nconst ticketDescription = document.querySelector(\"#ticketDescription\");\nconst inputGroup = [ticketName, ticketImgUrl, ticketRegion, ticketPrice, ticketNum, ticketRate, ticketDescription];\n\n// 搜尋區域\nconst regionSearch = document.querySelector(\"#regionSearch\");\nconst searchResult = document.querySelector(\"#searchResult\");\nconst cantFindArea = document.querySelector(\".cantFind-area\");\n\n// 顯示列表內元件宣告\nconst ticketCardArea = document.querySelector(\"#ticketCardArea\");\n\n// console.log(inputGroup);\n\nlet data;\naxios.get('https://raw.githubusercontent.com/hexschool/js-training/main/travelApi.json')\n  .then(function (response) {\n    data = response.data.data;\n\n    // 渲染初始頁面\n    init(data);\n  })\n\n// 渲染頁面\nfunction init(data) {\n  let str = \"\";\n  data.forEach(item => {\n    // console.log(item);\n    str += `\n  <div class=\"col-md-6 col-lg-4\">\n    <li class=\"shadow-sm border rounded-2 h-100\">\n      <div class=\"ticketCard-img | position-relative\">\n        <a href=\"#\" class=\"d-block overflow-hidden\">\n          <img src=\"${item.imgUrl}\" class=\"img-cover w-100\" alt=\"\">\n        </a>\n        <div class=\"position-absolute start-0 top-m13 rounded-end d-inline-block text-white bg-secondary fs-4 py-3 px-6\">${item.area}</div>\n        <div class=\"position-absolute start-0 bottom-m16 rounded-end d-inline-block text-white bg-primary py-1 px-3\">${item.rate}</div>\n      </div>\n      <div class=\"ticketCard-content | d-flex flex-column justify-content-between p-6\">\n        <a href=\"#\">\n          <h2 class=\"ticketCard-name | border-bottom border-success border-2 fw-medium fs-5 pb-1 mb-5\">${item.name}</h2>\n        </a>\n        <p class=\"text-dark\">${item.description}</p>\n        <div class=\"d-flex justify-content-between align-items-center\">\n          <div class=\"d-flex align-items-center\">\n            <span class=\"material-icons-outlined text-primary me-1\">error</span>\n            <p class=\"fw-medium text-primary\">剩下最後 ${item.group} 組</p>\n          </div>\n          <div class=\"d-flex align-items-center\">\n            <span class=\"fw-medium text-primary me-1\">TWD</span>\n            <p class=\"fw-medium fs-6 text-primary\">$${item.price}</p>\n        </div>\n      </div>\n      </div>\n    </li>\n  </div>`;\n  });\n  ticketCardArea.innerHTML = str;\n}\n\n// 註冊 click 監聽事件\naddTicketBtn.addEventListener(\"click\",addData);\n\n// 驗證表單欄位\nfunction checkInput() {\n  let num = 0;\n  inputGroup.forEach(function(item){\n    const input = document.querySelector(`#${item.id}`);\n    const messageArea = document.querySelector(`#${item.id}-message`);\n    // console.log(input.id);\n\n    if (input.value === \"\") {\n      messageArea.innerHTML = `<span class=\"material-icons-outlined text-danger me-2\">error</span>\n      <span class=\"text-danger\">必填！</span>`;\n      \n    } else{\n      // 判斷星級是否在1~10分 & 判斷描述字數是否在100字以內\n      if (input.id === \"ticketRate\" && (parseInt(input.value) > 10 || parseInt(input.value) < 1)) {\n        messageArea.innerHTML = `<span class=\"material-icons-outlined text-danger me-2\">error</span>\n      <span class=\"text-danger\">星級區間是 1-10 分！</span>`;\n      } else if (input.id === \"ticketDescription\" && input.value.length > 100) {\n        messageArea.innerHTML = `<span class=\"material-icons-outlined text-danger me-2\">error</span>\n      <span class=\"text-danger\">字數不得超過 100 個字！</span>`;\n      } else{\n        messageArea.innerHTML = ``;\n        num += 1;\n      }\n    }\n  })\n  // 回傳 num 結果給 addData() 判斷是否新增資料\n  return num;\n}\n\n// 新增套票\nfunction addData() {\n  let num = checkInput();\n  if (num === 7) {\n    let obj = {\n      id: data.length,\n      name: ticketName.value,\n      imgUrl: ticketImgUrl.value,\n      area: ticketRegion.value,\n      description: ticketDescription.value,\n      group: ticketNum.value,\n      price: ticketPrice.value,\n      rate: ticketRate.value\n    };\n  \n    data.push(obj);\n  \n    // 清空表單欄位\n    addTicketForm.reset();\n  \n    // 渲染頁面\n    updateList();\n  }\n}\n\n// 註冊 change 監聽事件\nregionSearch.addEventListener(\"change\", updateList)\n\n// 搜尋區域\nfunction updateList() {\n  let showData = data.filter(item => {\n    if (regionSearch.value === item.area) {\n      return item;\n    } else if (regionSearch.value === \"All\" || regionSearch.value === \"\"){\n      return item;\n    }\n  })\n\n  // 渲染頁面，用篩選好的 showData\n  init(showData);\n\n  // 搜尋筆數 & 搜尋不到頁面渲染，用篩選好的 showData\n  searchResultNum(showData);\n}\n\n// 搜尋筆數 & 搜尋不頁面顯示\nfunction searchResultNum(data) {\n  // 搜尋比數顯示\n  let dataLength = data.length;\n  searchResult.textContent = `本次搜尋共 ${dataLength} 筆資料`;\n\n  // 搜尋不到顯示畫面\n  if (dataLength === 0) {\n    cantFindArea.classList.remove(\"d-none\");\n  } else{\n    cantFindArea.classList.add(\"d-none\");\n  }\n}\n\n"]}